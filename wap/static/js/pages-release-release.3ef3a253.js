(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-release-release"],{"065c":function(t,e,n){"use strict";n.r(e);var i=n("f674"),a=n("946a");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("4904");var s=n("2877"),r=Object(s["a"])(a["default"],i["a"],i["b"],!1,null,"07966727",null);e["default"]=r.exports},4270:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"index"},[n("v-uni-view",{staticClass:"wrap"},[n("v-uni-view",{staticClass:"top uni-flex"},[n("v-uni-view",{staticClass:"cancel",on:{click:function(e){e=t.$handleEvent(e),t.goBack(e)}}},[n("v-uni-text",[t._v("取消")])],1),n("v-uni-view",{staticClass:"title"},[n("v-uni-text",[t._v("我要晒")])],1),n("v-uni-view",{staticClass:"release",class:1==t.isRelease?"active":"",on:{click:function(e){e=t.$handleEvent(e),t.release(e)}}},[n("v-uni-text",[t._v("发表")])],1)],1),n("v-uni-view",{staticClass:"middle"},[n("v-uni-view",{staticClass:"title"},[n("v-uni-input",{attrs:{type:"text",placeholder:"标题(最多可输入50个字)","placeholder-style":"color:#acaaaa"},on:{input:function(e){e=t.$handleEvent(e),t.title_Input(e)}}})],1),n("v-uni-view",{staticClass:"content"},[n("v-uni-textarea",{attrs:{placeholder:"来都来了不吐槽什么吗？","placeholder-style":"color:#acaaaa"},on:{input:function(e){e=t.$handleEvent(e),t.content_Input(e)}}})],1)],1),n("v-uni-view",{staticClass:"upLoader"},[n("v-uni-view",{staticClass:"upLoader_files"},[t._l(t.imageList,function(e,i){return[n("v-uni-view",{key:i+"_0",staticClass:"uni-uploader__file"},[n("v-uni-image",{staticClass:"uni-uploader__img",attrs:{src:e,"data-src":e},on:{click:function(e){e=t.$handleEvent(e),t.previewImage(e)}}}),n("v-uni-view",{staticClass:"close-view",on:{click:function(e){e=t.$handleEvent(e),t.close(i)}}},[t._v("x")])],1)]}),n("v-uni-view",{staticClass:"camera uni-center"},[n("v-uni-image",{attrs:{src:"../../static/images/camera.png"},on:{click:function(e){e=t.$handleEvent(e),t.chooseImage(e)}}})],1)],2)],1)],1)],1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},4904:function(t,e,n){"use strict";var i=n("f3e7"),a=n.n(i);a.a},"4de4":function(t,e,n){"use strict";n.r(e);var i=n("607a"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},"607a":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("a34a")),a=o(n("065c"));function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,i,a,o,s){try{var r=t[o](s),c=r.value}catch(u){return void n(u)}r.done?e(c):Promise.resolve(c).then(i,a)}function r(t){return function(){var e=this,n=arguments;return new Promise(function(i,a){var o=t.apply(e,n);function r(t){s(o,i,a,r,c,"next",t)}function c(t){s(o,i,a,r,c,"throw",t)}r(void 0)})}}var c={components:{statusBar:a.default},data:function(){return{title:"",content:"",isRelease:!1,imageList:[],saveImages:[]}},methods:{inspectRelease:function(){this.title<=0||this.content<=0?this.isRelease=!1:this.isRelease=!0},title_Input:function(t){this.title=t.target.value,this.inspectRelease()},content_Input:function(t){this.content=t.target.value,this.inspectRelease()},release:function(){var t=this;if(this.inspectRelease(),this.isRelease){if(0==this.imageList.length)return void this.$tool.showToast("至少上传一个美图");this.$tool.loading("处理中"),this.$http.post("user/pub_post",{title:this.title,content:this.content,content_image:this.saveImages}).then(function(e){t.$tool.loading("hide"),0==e.code&&(t.title="",t.content="",t.imageList=[],t.saveImages=[],t.$tool.showToast("发表成功"),uni.switchTab({url:"../community/community?refresh=1",animationDuration:400})),t.$tool.showToast(e.message),console.log(e)}).catch(function(e){t.$tool.loading("hide"),console.log("pub_err")})}},goBack:function(){uni.navigateBack({delta:1,animationType:"pop-out",animationDuration:200})},close:function(t){this.imageList.splice(t,1),this.saveImages.splice(t,1)},chooseImage:function(){var t=r(i.default.mark(function t(){var e,n=this;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(9!==this.imageList.length){t.next=7;break}return t.next=3,this.isFullImg();case 3:if(e=t.sent,console.log("是否继续?",e),e){t.next=7;break}return t.abrupt("return");case 7:uni.chooseImage({sourceType:["camera","album"],sizeType:["compressed","original"],count:1,success:function(t){n.$http.upload("user/upload_forum_image",{},{filePath:t.tempFilePaths[0],name:"file"}).then(function(t){if(t=JSON.parse(t),console.log(t),0==t.code){var e=t.data;return n.imageList.push(e.domain+e.image_url),n.saveImages.push(e.image_url),!1}n.$tool.showToast(t.message)}).catch(function(t){console.log("upload_err")})}});case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),isFullImg:function(){var t=this;return new Promise(function(e){uni.showModal({content:"已经有9张图片了,是否清空现有图片？",success:function(n){n.confirm?(t.imageList=[],t.saveImages=[],e(!0)):e(!1)},fail:function(){e(!1)}})})},previewImage:function(t){var e=t.target.dataset.src;console.log(this.imageList),uni.previewImage({current:e,urls:this.imageList})}}};e.default=c},"80a0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{platform:"",statusBarHeight:"",screenHeight:"",windowHeight:"",navHeight:""}},onLoad:function(){}};e.default=i},"8d4a":function(t,e,n){"use strict";var i=n("ede4"),a=n.n(i);a.a},"946a":function(t,e,n){"use strict";n.r(e);var i=n("80a0"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},a34a:function(t,e,n){t.exports=n("bbdd")},bbdd:function(t,e,n){var i=function(){return this||"object"===typeof self&&self}()||Function("return this")(),a=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,o=a&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,t.exports=n("96cf"),a)i.regeneratorRuntime=o;else try{delete i.regeneratorRuntime}catch(s){i.regeneratorRuntime=void 0}},d5ba:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".wrap[data-v-7d07678c]{width:%?750?%}.top[data-v-7d07678c]{width:%?660?%;height:%?140?%;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:%?0?% %?40?%}.top uni-view[data-v-7d07678c]{font-size:%?32?%;color:#898989}.top .cancel[data-v-7d07678c]{position:relative;width:%?100?%}.top .title[data-v-7d07678c]{color:#171717}.top .release[data-v-7d07678c]{position:relative;width:%?100?%;text-align:right}.top .active[data-v-7d07678c]{color:#f4cc7e}.middle[data-v-7d07678c]{width:%?750?%;border-bottom:%?1?% solid #f5f5f5}.middle .title[data-v-7d07678c]{height:%?80?%;margin:%?0?% %?40?%;border-bottom:%?2?% solid #e9e9e9}.middle .title uni-input[data-v-7d07678c]{height:%?80?%}.middle .content[data-v-7d07678c]{height:%?520?%;margin:%?20?% %?40?%}\r\n/* 上传图片 */.upLoader[data-v-7d07678c]{margin:%?20?% %?30?%}.uni-uploader__file[data-v-7d07678c]{margin:%?10?%;width:%?210?%;height:%?210?%;position:relative}.upLoader .upLoader_files[data-v-7d07678c]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.uni-uploader__img[data-v-7d07678c]{display:block;width:%?210?%;height:%?210?%}.upLoader .camera[data-v-7d07678c]{width:%?210?%;height:%?210?%}.upLoader .camera uni-image[data-v-7d07678c]{width:%?109?%;height:%?84?%}.close-view[data-v-7d07678c]{text-align:center;line-height:%?22?%;height:%?24?%;width:%?24?%;border-radius:50%;background:#ef5350;color:#fff;position:absolute;top:%?6?%;right:%?8?%;font-size:%?24?%}",""])},ede4:function(t,e,n){var i=n("d5ba");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("18da97d0",i,!0,{sourceMap:!1,shadowMode:!1})},f367:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/* 状态栏 */.status_bar[data-v-07966727]{height:0;width:100%}.top_view[data-v-07966727]{height:0;width:100%;position:fixed;background-color:#fff;top:0;z-index:999}",""])},f3e7:function(t,e,n){var i=n("f367");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("657de40a",i,!0,{sourceMap:!1,shadowMode:!1})},f66c:function(t,e,n){"use strict";n.r(e);var i=n("4270"),a=n("4de4");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("8d4a");var s=n("2877"),r=Object(s["a"])(a["default"],i["a"],i["b"],!1,null,"7d07678c",null);e["default"]=r.exports},f674:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view")},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})}}]);