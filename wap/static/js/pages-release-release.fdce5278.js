(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-release-release"],{"065c":function(t,e,i){"use strict";i.r(e);var n=i("7493"),a=i("946a");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("b8d9");var s=i("2877"),r=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"5c41bc10",null);e["default"]=r.exports},"1bfe":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".wrap[data-v-0ecf9152]{width:%?750?%}.top[data-v-0ecf9152]{width:%?660?%;height:%?140?%;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:%?0?% %?40?%}.top uni-view[data-v-0ecf9152]{font-size:%?32?%;color:#898989}.top .cancel[data-v-0ecf9152]{position:relative;width:%?100?%}.top .title[data-v-0ecf9152]{color:#171717}.top .release[data-v-0ecf9152]{position:relative;width:%?100?%;text-align:right}.top .active[data-v-0ecf9152]{color:#f4cc7e}.middle[data-v-0ecf9152]{width:%?750?%;border-bottom:%?1?% solid #f5f5f5}.middle .title[data-v-0ecf9152]{height:%?80?%;margin:%?0?% %?40?%;border-bottom:%?2?% solid #e9e9e9}.middle .title uni-input[data-v-0ecf9152]{height:%?80?%}.middle .content[data-v-0ecf9152]{height:%?520?%;margin:%?20?% %?40?%}\r\n/* 上传图片 */.upLoader[data-v-0ecf9152]{margin:%?20?% %?30?%}.uni-uploader__file[data-v-0ecf9152]{margin:%?10?%;width:%?210?%;height:%?210?%;position:relative}.upLoader .upLoader_files[data-v-0ecf9152]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.uni-uploader__img[data-v-0ecf9152]{display:block;width:%?210?%;height:%?210?%}.upLoader .camera[data-v-0ecf9152]{width:%?210?%;height:%?210?%}.upLoader .camera uni-image[data-v-0ecf9152]{width:%?109?%;height:%?84?%}.close-view[data-v-0ecf9152]{text-align:center;line-height:%?22?%;height:%?24?%;width:%?24?%;border-radius:50%;background:#ef5350;color:#fff;position:absolute;top:%?6?%;right:%?8?%;font-size:%?24?%}",""])},"4de4":function(t,e,i){"use strict";i.r(e);var n=i("607a"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},"4e1a":function(t,e,i){var n=i("a1f8");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("66a40329",n,!0,{sourceMap:!1,shadowMode:!1})},"607a":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("a34a")),a=o(i("065c"));function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e,i,n,a,o,s){try{var r=t[o](s),c=r.value}catch(u){return void i(u)}r.done?e(c):Promise.resolve(c).then(n,a)}function r(t){return function(){var e=this,i=arguments;return new Promise(function(n,a){var o=t.apply(e,i);function r(t){s(o,n,a,r,c,"next",t)}function c(t){s(o,n,a,r,c,"throw",t)}r(void 0)})}}var c={components:{statusBar:a.default},data:function(){return{title:"",content:"",isRelease:!1,imageList:[],saveImages:[]}},methods:{inspectRelease:function(){this.title<=0||this.content<=0?this.isRelease=!1:this.isRelease=!0},title_Input:function(t){this.title=t.target.value,this.inspectRelease()},content_Input:function(t){this.content=t.target.value,this.inspectRelease()},release:function(){var t=this;if(this.inspectRelease(),this.isRelease){if(0==this.imageList.length)return void this.$tool.showToast("至少上传一个美图");this.$tool.loading("处理中"),this.$http.post("user/pub_post",{title:this.title,content:this.content,content_image:this.saveImages}).then(function(e){t.$tool.loading("hide"),0==e.code&&(t.title="",t.content="",t.imageList=[],t.saveImages=[],t.$tool.showToast("发表成功"),uni.switchTab({url:"../community/community?refresh=1",animationDuration:400})),t.$tool.showToast(e.message),console.log(e)}).catch(function(e){t.$tool.loading("hide"),console.log("pub_err")})}},goBack:function(){uni.navigateBack({delta:1,animationType:"pop-out",animationDuration:200})},close:function(t){this.imageList.splice(t,1),this.saveImages.splice(t,1)},chooseImage:function(){var t=r(n.default.mark(function t(){var e,i=this;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(9!==this.imageList.length){t.next=7;break}return t.next=3,this.isFullImg();case 3:if(e=t.sent,console.log("是否继续?",e),e){t.next=7;break}return t.abrupt("return");case 7:uni.chooseImage({sourceType:["camera","album"],sizeType:["compressed","original"],count:1,success:function(t){i.$tool.loading("上传中"),i.$http.upload("user/upload_forum_image",{},{filePath:t.tempFilePaths[0],name:"file"}).then(function(t){if(i.$tool.loading("hide"),t=JSON.parse(t),console.log(t),0==t.code){var e=t.data;return i.imageList.push(e.domain+e.image_url),i.saveImages.push(e.image_url),i.$tool.showToast("上传成功"),!1}i.$tool.showToast(t.message)}).catch(function(t){i.$tool.loading("hide"),console.log("upload_err")})}});case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),isFullImg:function(){var t=this;return new Promise(function(e){uni.showModal({content:"已经有9张图片了,是否清空现有图片？",success:function(i){i.confirm?(t.imageList=[],t.saveImages=[],e(!0)):e(!1)},fail:function(){e(!1)}})})},previewImage:function(t){var e=t.target.dataset.src;console.log(this.imageList),uni.previewImage({current:e,urls:this.imageList})}}};e.default=c},"661d":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"index"},[i("v-uni-view",{staticClass:"wrap"},[i("v-uni-view",{staticClass:"top uni-flex",style:{marginTop:t.statusBarHeight}},[i("v-uni-view",{staticClass:"cancel",on:{click:function(e){e=t.$handleEvent(e),t.goBack(e)}}},[i("v-uni-text",[t._v("取消")])],1),i("v-uni-view",{staticClass:"title"},[i("v-uni-text",[t._v("我要晒")])],1),i("v-uni-view",{staticClass:"release",class:1==t.isRelease?"active":"",on:{click:function(e){e=t.$handleEvent(e),t.release(e)}}},[i("v-uni-text",[t._v("发表")])],1)],1),i("v-uni-view",{staticClass:"middle"},[i("v-uni-view",{staticClass:"title"},[i("v-uni-input",{attrs:{type:"text",placeholder:"标题(最多可输入50个字)","placeholder-style":"color:#acaaaa"},on:{input:function(e){e=t.$handleEvent(e),t.title_Input(e)}}})],1),i("v-uni-view",{staticClass:"content"},[i("v-uni-textarea",{attrs:{placeholder:"来都来了不吐槽什么吗？","placeholder-style":"color:#acaaaa"},on:{input:function(e){e=t.$handleEvent(e),t.content_Input(e)}}})],1)],1),i("v-uni-view",{staticClass:"upLoader"},[i("v-uni-view",{staticClass:"upLoader_files"},[t._l(t.imageList,function(e,n){return[i("v-uni-view",{key:n+"_0",staticClass:"uni-uploader__file"},[i("v-uni-image",{staticClass:"uni-uploader__img",attrs:{src:e,"data-src":e,"lazy-load":""},on:{click:function(e){e=t.$handleEvent(e),t.previewImage(e)}}}),i("v-uni-view",{staticClass:"close-view",on:{click:function(e){e=t.$handleEvent(e),t.close(n)}}},[t._v("x")])],1)]}),i("v-uni-view",{staticClass:"camera uni-center"},[i("v-uni-image",{attrs:{src:"../../static/images/camera.png"},on:{click:function(e){e=t.$handleEvent(e),t.chooseImage(e)}}})],1)],2)],1)],1)],1)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},7493:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"status_bar"},[i("v-uni-view",{staticClass:"top_view"})],1)],1)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},"80a0":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{statusBarHeight:""}},onLoad:function(){}};e.default=n},"946a":function(t,e,i){"use strict";i.r(e);var n=i("80a0"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},a1f8:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/* 状态栏 */.status_bar[data-v-5c41bc10]{height:0;width:100%}.top_view[data-v-5c41bc10]{height:0;width:100%;position:fixed;background-color:#fff;top:0;z-index:9999}",""])},a34a:function(t,e,i){t.exports=i("bbdd")},b8d9:function(t,e,i){"use strict";var n=i("4e1a"),a=i.n(n);a.a},bbdd:function(t,e,i){var n=function(){return this||"object"===typeof self&&self}()||Function("return this")(),a=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=a&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=i("96cf"),a)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(s){n.regeneratorRuntime=void 0}},d567:function(t,e,i){var n=i("1bfe");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("1789986b",n,!0,{sourceMap:!1,shadowMode:!1})},f66c:function(t,e,i){"use strict";i.r(e);var n=i("661d"),a=i("4de4");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("fbd2");var s=i("2877"),r=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"0ecf9152",null);e["default"]=r.exports},fbd2:function(t,e,i){"use strict";var n=i("d567"),a=i.n(n);a.a}}]);